import { Callout } from "nextra-theme-docs";
import { SwaggerLink, SchemaLoader, ExternalLink } from "components";
import {
  SWAGGER_TAGS,
  SWAGGER_SCHEMA_YAML_URL,
  TONAPI_LANDING_PAGE_SWAGGER_URL,
  LINKS,
} from "../../constants";
import { loadStatic } from "utils/schemas";

export const getStaticProps = loadStatic;

# REST API

## Introduction

This section of the documentation covers the **TONAPI** REST API, which provides access to various services for interacting with the TON blockchain. These services allow you to perform operations on accounts, retrieve blockchain data, utilize advanced features like gasless transactions, and more.

To facilitate integration and testing of the REST API, the following resources are available:

- **Swagger File**: The full Swagger specification is available on <ExternalLink href={SWAGGER_SCHEMA_YAML_URL}>GitHub</ExternalLink>, allowing you to explore the API structure and generate client code in various programming languages.
- **Swagger UI**: For interactive testing and exploration of the API, use <ExternalLink href={TONAPI_LANDING_PAGE_SWAGGER_URL}>Swagger UI</ExternalLink>.
- **SDKs**: To simplify integration, SDKs are provided in multiple programming languages. You can find them in the [SDK Documentation](./sdk) section.

## Services

### Accounts <SwaggerLink tag={SWAGGER_TAGS.ACCOUNTS} />

**Accounts** service provide API access to structured account information within the TON network. Allows retrieval of data such as balance, transaction history, DNS, multisigs, NFTs, Jettons, and other account-related details without dealing with low-level specifics. All data is regularly updated and can be used to build applications that require accurate and up-to-date account information.

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.ACCOUNTS} />

### NFT <SwaggerLink tag={SWAGGER_TAGS.NFT} />

The **NFT** service provides access to non-fungible tokens (NFTs) on the TON blockchain. This service enables retrieval of detailed information about NFTs, including metadata, ownership, and transaction history. NFTs are unique digital assets that represent ownership of various items, such as collectibles, art, and virtual real estate.

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.NFT} />

### Jettons <SwaggerLink tag={SWAGGER_TAGS.JETTONS} />

The **Jettons** service provides access to fungible tokens on the TON blockchain. This service enables retrieval of detailed information about fungible tokens, including balances, transaction history, and metadata. Jettons are digital assets that can be transferred between users and used as a medium of exchange within the TON ecosystem.

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.JETTONS} />

{/* An event is built on top of a trace which is a series of transactions caused by one inbound message. TonAPI looks for known patterns inside the trace and splits the trace into actions, where a single action represents a meaningful high-level operation like a Jetton Transfer or an NFT Purchase. Actions are expected to be shown to users. It is advised not to build any logic on top of actions because actions can be changed at any time. */}

### Rates <SwaggerLink tag={SWAGGER_TAGS.RATES} />

**Rates** service provides access to exchange rates for various tokens on the TON blockchain.
TODO: Add more details about source of data

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.RATES} />

### DNS <SwaggerLink tag={SWAGGER_TAGS.DNS} />

The **DNS** service provides access to the <ExternalLink href={LINKS.TONDNS_ABOUT}>TON DNS</ExternalLink>. This service enables retrieval of detailed information about domain names, including ownership, expiration dates, and associated accounts. DNS is used to map human-readable domain names to blockchain addresses, facilitating interaction with accounts and services on the TON network.

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.DNS} />

### Events

**Events** service provides access to high-level actions that occur on the TON blockchain. These actions are derived from traces, which represent a series of transactions caused by a single inbound message. Events are meaningful operations such as Jetton transfers, NFT purchases, and other user interactions. By using the **Events** service, you can retrieve detailed information about user activities on the TON blockchain.

<Callout type="warning" emoji="⚠️">
  Can't be used for building logic, as the structure of events can change at any
  time.
</Callout>

Use it only for displaying information to users.

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.EVENTS} />

### Traces <SwaggerLink tag={SWAGGER_TAGS.TRACES} />

**Traces** service provides access to low-level transaction traces on the TON blockchain. This service enables retrieval of detailed information about individual transactions, including input and output data, gas usage, and execution status. Traces are essential for debugging and analyzing blockchain interactions, as they provide a detailed view of the transaction lifecycle.

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.TRACES} />

### Gasless <SwaggerLink tag={SWAGGER_TAGS.GASLESS} />

**Gasless transactions** on the TON platform enable users to send transactions without paying gas fees directly from their wallets. This is achieved using **Signed Internal Messages** sent through a **gas proxy contract**, which covers the transaction fees on behalf of the user. This approach simplifies blockchain interactions, making it easier for users who may not have TON tokens in their wallets.

This service only works with [W5 wallets](https://github.com/tonkeeper/w5/blob/main/Specification.md)

#### Architecture

Gasless transactions leverage **Signed Internal Messages**. These messages are signed by the user but routed through a smart contract that pays the fees using a **gas proxy**. This eliminates the need for users to hold TON tokens for transaction fees.

**TONAPI** plays a critical role by simulating transaction execution to accurately estimate fees and sending the transaction to multiple validators to increase the chances of successful processing. Additionally, **TONAPI** ensures that the user’s wallet and gas proxy contract are in the same shard, minimizing latency and ensuring fast transaction processing.

#### Process for Executing

1. **Fetch Configuration:** Request the gasless transaction parameters using `/v2/gasless/config`.
2. **Estimate Transaction:** Send a POST request to `/v2/gasless/estimate/{master_id}` to receive a payload for signing.
3. **Sign Payload:** Sign the received payload with your private key.
4. **Send Transaction:** Submit the signed message via POST to `/v2/gasless/send`.

#### Implementation Examples

- **TypeScript:** See an implementation example for gasless transactions in TypeScript [here](/tonapi/recipes#gasless-transfer).
- **Go:** Find the Go implementation example [here](/tonapi/recipes#gasless-transfer).

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.GASLESS} />

### Blockchain <SwaggerLink tag={SWAGGER_TAGS.BLOCKCHAIN} />

The **Blockchain** service provides low-level access to the TON blockchain, enabling retrieval of detailed information about blocks, transactions, accounts, and more. These endpoints are essential for building tools that require deep blockchain data and are critical for applications that interact closely with the TON blockchain.

**TONAPI** ensures that data retrieved from the blockchain is accurate and up-to-date by continuously indexing the blockchain and maintaining a low-latency connection to the TON network.

#### Operations

<SchemaLoader tag={SWAGGER_TAGS.BLOCKCHAIN} />
